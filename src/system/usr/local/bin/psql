#!/bin/bash

TTY=$([ -t 0 ] && echo "true" || echo "false")
USER=$(id -u)
HOME=$(getent passwd $USER | cut -d: -f6)

[[ ! -f $HOME/.psql_history ]] && touch $HOME/.psql_history

[[ -z $VERSION ]] && VERSION="9.3"

docker run \
    --interactive \
    --net host \
    --rm \
    --tty=$TTY \
    --volume $HOME/.psql_history:/root/.psql_history \
    postgres:$VERSION psql $*
