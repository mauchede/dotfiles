#!/bin/sh

docker run \
    --entrypoint dumb-init \
    $(env | cut -d= -f1 | awk '{print "--env", $1}') \
    --interactive \
    --net host \
    --rm \
    --tty="$([ -t 0 ] && echo "true" || echo "false")" \
    --volume /etc/group:/etc/group:ro \
    --volume /etc/localtime:/etc/localtime:ro \
    --volume /etc/passwd:/etc/passwd:ro \
    --volume /etc/timezone:/etc/timezone:ro \
    --volume /run:/run \
    --volume /tmp:/tmp \
    --volume /usr/local/sbin:/usr/local/sbin:ro \
    --volume "$HOME:$HOME" \
    "${IMAGE:-redis}:${TAG:-latest}" dumb-entrypoint redis-cli "$@"
